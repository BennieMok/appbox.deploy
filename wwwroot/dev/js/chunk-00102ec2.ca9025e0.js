(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00102ec2"],{"11e9":function(t,e,n){var i=n("52a7"),o=n("4630"),s=n("6821"),r=n("6a99"),a=n("69a8"),c=n("c69a"),h=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?h:function(t,e){if(t=s(t),e=r(e,!0),c)try{return h(t,e)}catch(n){}if(a(t,e))return o(!i.f.call(t,e),t[e])}},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"5d73":function(t,e,n){t.exports=n("469f")},"5dbc":function(t,e,n){var i=n("d3f4"),o=n("8b97").set;t.exports=function(t,e,n){var s,r=e.constructor;return r!==n&&"function"==typeof r&&(s=r.prototype)!==n.prototype&&i(s)&&o&&o(t,s),t}},"7d7b":function(t,e,n){var i=n("e4ae"),o=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},8745:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%",width:"100%"}},[n("design-view",{ref:"designView",attrs:{background:"lightgray"}})],1)},o=[],s=(n("6b54"),n("c34c")),r=n("d225"),a=n("b0b4"),c=n("308d"),h=n("6bb5"),u=n("2a88"),l=n("4e2b"),g=(n("ac6a"),n("6c7b"),n("c5f6"),n("a374")),d=n("978d"),A=n("1771"),C=(n("7f7f"),function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,null,[{key:"IsCustom",value:function(t){return!1}},{key:"GetKnownOffset",value:function(e){var n=t.knownConnectors[e];if(n)return new d["a"](n[0],n[1]);throw new Error("Can not find known offset for: "+e)}}]),t}());C.Auto="Auto",C.Left="Left",C.Top="Top",C.Right="Right",C.Gliding="Gliding",C.Bottom="Bottom",C.knownConnectors={Auto:[.5,.5],Left:[0,.5],Right:[1,.5],Top:[.5,0],Bottom:[.5,1],Gliding:[.5,.5]};var f,v=function(){function t(){Object(r["a"])(this,t),this.Figures=new Array}return Object(a["a"])(t,[{key:"CreatePath",value:function(){var t=new Path2D,e=this.Figures[0];return e.FillToPath(t),t}}]),t}();(function(t){t[t["EvenOdd"]=0]="EvenOdd",t[t["Nonzero"]=1]="Nonzero"})(f||(f={}));var b,y=function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,[{key:"FillToPath",value:function(t){t.lineTo(this.Point.X,this.Point.Y)}}]),t}(),I=function(){function t(){Object(r["a"])(this,t),this.IsClosed=!1,this.IsFilled=!0,this.StartPoint=new d["a"](0,0),this.Segments=new Array}return Object(a["a"])(t,[{key:"FillToPath",value:function(t){t.moveTo(this.StartPoint.X,this.StartPoint.Y);for(var e=0;e<this.Segments.length;e++){var n=this.Segments[e];n.FillToPath(t)}}},{key:"Fetch",value:function(t){this.StartPoint=t.StartPoint;for(var e=0;e<t.Segments.length;e++){var n=t.Segments[e];if(1!==n.Type)throw new Error("Not implemented.");var i=new y;i.Point=n.Point,this.Segments.push(i)}}}]),t}();(function(t){t[t["Polyline"]=0]="Polyline",t[t["Bezier"]=1]="Bezier",t[t["Spline"]=2]="Spline"})(b||(b={}));var P,p=b,m=n("fe0c"),S=n("5d73"),k=n.n(S),w=function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,null,[{key:"GetConnectorsBounds",value:function(t){if(!t||0==t.Connectors.length)return new g["a"](0,0,0,0);var e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE,s=!0,r=!1,a=void 0;try{for(var c,h=k()(t.Connectors);!(s=(c=h.next()).done);s=!0){var u=c.value,l=u.AbsolutePosition;e=Math.min(e,l.X),n=Math.min(n,l.Y),i=Math.max(i,l.X),o=Math.max(o,l.Y)}}catch(d){r=!0,a=d}finally{try{s||null==h.return||h.return()}finally{if(r)throw a}}return new g["a"](e,n,i-e,o-n)}},{key:"GetNearestConnector2",value:function(t,e){return null!=t?this.GetNearestConnector(t,e,Number.MAX_VALUE):null}},{key:"GetNearestConnector",value:function(t,e,n){return console.log("GetNearestConnector todo ..."),null}}]),t}(),O=5,j=5,T=function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,null,[{key:"ActivateNearestConnector",value:function(t,e,n,i){var o=t.DesignService.GetShapes();if(0!==o.length){for(var s=new Array,r=0;r<o.length;r++){var a=w.GetConnectorsBounds(o[r]);a.Inflate(O,O),a.Contains(i.X,i.Y)&&o[r].CanConnect(n,e)&&s.push(o[r])}if(s.length>0)for(r=s.length-1;r>=0;r--)for(var c=s[r],h=0;h<c.Connectors.length;h++){var u=d["a"].Distance(c.Connectors[h].AbsolutePosition,i);if(u<O&&u<j)return void(t.Adorners.ActiveConnector=c.Connectors[h])}t.Adorners.UpdateNearestShapes(s)}}}]),t}();(function(t){t[t["Intermediate"]=0]="Intermediate",t[t["First"]=1]="First",t[t["Last"]=2]="Last"})(P||(P={}));var G,D=P,Y=function t(){Object(r["a"])(this,t)},R=function(t){function e(t,n){var i;return Object(r["a"])(this,e),i=Object(c["a"])(this,Object(h["a"])(e).call(this,t,n)),i._pointSize=6,i._moveDeltaX=0,i._moveDeltaY=0,i}return Object(l["a"])(e,t),Object(a["a"])(e,[{key:"ResetCache",value:function(){this._pointsCache=null}},{key:"GetEditPoints",value:function(){if(null!=this._pointsCache)return this._pointsCache;var t=this.Target,e=t.Bounds.X,n=t.Bounds.Y,i=new Array,o=t.StartPoint,s=new g["a"](o.X-e-this._pointSize/2,o.Y-n-this._pointSize/2,this._pointSize,this._pointSize),r=new Y;r.Type=D.First,r.Rect=s,r.Index=0,i.push(r);var a=t.EndPoint;return s=new g["a"](a.X-e-this._pointSize/2,a.Y-n-this._pointSize/2,this._pointSize,this._pointSize),r=new Y,r.Type=D.Last,r.Rect=s,r.Index=i.length,i.push(r),this._pointsCache=i,i}},{key:"HitTest",value:function(t){for(var e=this.GetEditPoints(),n=0;n<e.length;n++)if(e[n].Rect.Contains(t.X,t.Y))return this._hitPoint=e[n],[!0,""];return this._hitPoint=null,[!1,""]}},{key:"OnMouseMove",value:function(t){if(this._hitPoint){var e=this.Target;this._moveDeltaX+=t.DeltaX,this._moveDeltaY+=t.DeltaY,this._hitPoint.Type!=D.First&&this._hitPoint.Type!=D.Last||e.Surface&&T.ActivateNearestConnector(e.Surface,e,this._hitPoint.Type==D.First,new d["a"](t.X,t.Y)),this.Owner.Invalidate()}}},{key:"OnMouseUp",value:function(t){this._moveDeltaX=0,this._moveDeltaY=0}},{key:"OnRender",value:function(t){for(var e=this.GetEditPoints(),n=0;n<e.length;n++)this.DrawEditPoint(t,e[n].Rect);if(this._hitPoint&&(0!==this._moveDeltaX||0!==this._moveDeltaY)){var i=this.Target,o=i.PointToSurface(new d["a"](0,0));t.setLineDash([4,4]),t.strokeStyle="blue",t.lineWidth=1.5,this._hitPoint.Type===D.First?(t.beginPath(),t.moveTo(i.StartPoint.X-o.X+this._moveDeltaX,i.StartPoint.Y-o.Y+this._moveDeltaY),t.lineTo(i.EndPoint.X-o.X,i.EndPoint.Y-o.Y),t.stroke()):this._hitPoint.Type===D.Last&&(t.beginPath(),t.moveTo(i.StartPoint.X-o.X,i.StartPoint.Y-o.Y),t.lineTo(i.EndPoint.X+this._moveDeltaX-o.X,i.EndPoint.Y+this._moveDeltaY-o.Y),t.stroke()),t.setLineDash([])}}},{key:"DrawEditPoint",value:function(t,e){t.fillStyle="white",t.fillRect(e.X,e.Y,e.Width,e.Height),t.strokeStyle="black",t.lineWidth=1,t.strokeRect(e.X,e.Y,e.Width,e.Height)}},{key:"ActiveEditPoint",get:function(){return this._hitPoint}}]),e}(m["a"]),X=function(){function t(){Object(r["a"])(this,t)}return Object(a["a"])(t,null,[{key:"CreateByTwoPoint",value:function(t,e){var n=new g["a"](0,0,0,0);return n.X=Math.min(t.X,e.X),n.Y=Math.min(t.Y,e.Y),n.Width=Math.max(Math.max(t.X,e.X)-n.X,0),n.Height=Math.max(Math.max(t.Y,e.Y)-n.Y,0),n}}]),t}(),W=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(h["a"])(e).call(this)),t.ConnectionPoints=new Array,t.isDirty=!1,t.edittingPoint=new d["a"](0,0),t.connectionPoints=new Array,t.startPoint=new d["a"](0,0),t.endPoint=new d["a"](0,0),t}return Object(l["a"])(e,t),Object(a["a"])(e,[{key:"OnSourceChanged",value:function(t){this.isSuppressingConnectionUpdate||this.ResolveSourceConnector()}},{key:"Invalidate",value:function(){this.Surface&&this.Surface.Invalidate()}},{key:"HitTest",value:function(t,e,n){if(this.Surface){n.lineWidth=4;var i=this.EnsureGeometryPath();if(i)return n.isPointInStroke(i,t*this.Surface.PixelRatio,e*this.Surface.PixelRatio)}return!1}},{key:"EnsureGeometryPath",value:function(){return this._cachedPath||this.geometry&&(this._cachedPath=this.geometry.CreatePath()),this._cachedPath}},{key:"UpdateGeometryPoint",value:function(t,e){if(0==t)this.StartPoint=e;else if(t==this.ConnectionPoints.length+1)this.EndPoint=e;else{this.ConnectionPoints[t-1];this.ConnectionPoints[t-1]=e}this.Update(!1)}},{key:"Update",value:function(t){if(!this.isSuppressingConnectionUpdate){var e=t&&this.Source!=this.Target;this.isDirty||!e?(e||this.CalculateAutoConnectors(!0,!0),this.isDirty=!1):e&&(this.isDirty=!0),null!=this.Parent?this.Parent.Invalidate():null!=this.Surface&&this.Surface.Invalidate()}}},{key:"GetNearestConnector2",value:function(t,e,n){return null}},{key:"GetNearestConnector",value:function(t,e){if(null!=t){var n=new Array;return n.push(t),this.GetNearestConnector2(n,e,Number.MAX_VALUE)}return null}},{key:"CalculateAutoConnectors",value:function(t,e){var n,i;if(t&&null!=this.Source&&this.SourceConnectorPosition==C.Auto&&(n=this.ConnectionPoints.length>0&&this.ConnectionType!=p.Bezier?this.ConnectionPoints[0]:null==this.Target?this.endPoint:new d["a"](this.Target.Bounds.X+this.Target.Bounds.Width/2,this.Target.Bounds.Y+this.Target.Bounds.Height/2),this.SourceConnectorResult=this.GetNearestConnector(this.Source,n),null==this.SourceConnectorResult))for(var o=0;o<this.Source.Connectors.length;o++)if(this.Source.Connectors[o].Name==C.Auto){this.SourceConnectorResult=this.Source.Connectors[o];break}if(e&&null!=this.Target&&this.TargetConnectorPosition==C.Auto&&(i=this.ConnectionPoints.length>0&&this.ConnectionType!=p.Bezier?this.ConnectionPoints[this.ConnectionPoints.length-1]:null==this.Source?this.endPoint:new d["a"](this.Source.Bounds.X+this.Source.Bounds.Width/2,this.Source.Bounds.Y+this.Source.Bounds.Height/2),this.TargetConnectorResult=this.GetNearestConnector(this.Target,i),null==this.TargetConnectorResult))for(o=0;o<this.Target.Connectors.length;o++)if(this.Target.Connectors[o].Name==C.Auto){this.SourceConnectorResult=this.Target.Connectors[o];break}}},{key:"TranslateConnectionPoints",value:function(t){for(var e=new Array,n=0;n<this.ConnectionPoints.length;n++)e.push(t?new d["a"](this.ConnectionPoints[n].X+this.Position.X,this.ConnectionPoints[n].Y+this.Position.Y):new d["a"](this.ConnectionPoints[n].X-this.Position.X,this.ConnectionPoints[n].Y-this.Position.Y));return e}},{key:"SetPosition",value:function(t){this.isInnerChange=!0,this.Position=t,this.isInnerChange=!1}},{key:"SetBounds",value:function(t,e,n,i,o){}},{key:"AllPoints",value:function(){var t=new Array;t.push(this.StartPoint);for(var e=0;e<this.ConnectionPoints.length;e++)t.push(this.ConnectionPoints[e]);return t.push(this.EndPoint),t}},{key:"Paint",value:function(t){this.DrawConnectionLine(t,!1),this.DrawConnectionCap(t,this.targetCap),this.DrawConnectionCap(t,this.sourceCap),this.DrawConnectionText(t)}},{key:"DrawConnectionCap",value:function(t,e){if(e){var n=new Path2D;e.FillToPath(n),t.fillStyle="black",t.fill(n)}}},{key:"DrawConnectionLine",value:function(t,e){var n=this.EnsureGeometryPath();n&&(t.strokeStyle="green",t.lineWidth=1.5,t.stroke(n))}},{key:"DrawConnectionText",value:function(t){if(this.title){var e=t.measureText(this.title),n=new g["a"](this.edittingPoint.X+.5,this.edittingPoint.Y,e.width,12);t.fillStyle="white",t.fillRect(n.X,n.Y,n.Width,n.Height),t.fillStyle="black",t.textBaseline="top",t.fillText(this.title,this.edittingPoint.X,this.edittingPoint.Y)}}},{key:"OnTargetChanged",value:function(t){this.isSuppressingConnectionUpdate||this.ResolveTargetConnector()}},{key:"ResolveTargetConnector",value:function(){if(null!=this.Target){if(0==this.Target.Connectors.length)return void console.log("Shape Has No Connectors");if(this.TargetConnectorPosition!=C.Auto){var t=0;for(t=0;t<this.Target.Connectors.length;t++)if(this.Target.Connectors[t].Name==this.TargetConnectorPosition){this.TargetConnectorResult=this.Target.Connectors[t];break}null==this.TargetConnectorResult&&console.log("Connector Doesnt Exist: "+this.TargetConnectorResult)}}else this.TargetConnectorResult=null}},{key:"OnTargetConnectorPositionChanged",value:function(t,e){this.ResolveTargetConnector(),this.Update(!1)}},{key:"ResolveSourceConnector",value:function(){if(null!=this.Source){if(0==this.Source.Connectors.length)return void console.log("Shape Has No Connectors");if(this.SourceConnectorPosition!=C.Auto){var t;for(t=0;t<this.Source.Connectors.length;t++)if(this.Source.Connectors[t].Name==this.SourceConnectorPosition){this.SourceConnectorResult=this.Source.Connectors[t];break}null==this.SourceConnectorResult&&console.log("Connector Doesnt Exist:"+this.SourceConnectorPosition)}}else this.SourceConnectorResult=null}},{key:"OnSourceConnectorPositionChanged",value:function(t,e){this.ResolveSourceConnector(),this.Update(!1)}},{key:"GetConnectionEndPoints",value:function(t){var e=new d["a"](this.StartPoint.X,this.StartPoint.Y),n=new d["a"](this.EndPoint.X,this.EndPoint.Y);return t&&(e=new d["a"](e.X-this.Bounds.X,e.Y-this.Bounds.Y),n=new d["a"](n.X-this.Bounds.X,n.Y-this.Bounds.Y)),[e,n]}},{key:"Distance",value:function(t,e){return Math.sqrt(Math.pow(t.X-e.X,2)+Math.pow(t.Y-e.Y,2))}},{key:"CalculateMiddlePointOfLine",value:function(t,e){var n=new Array;n.push(t[0]);for(var i=0;i<e.length;i++)n[1+i]=e[i];n.push(t[1]);var o=0;for(i=0;i<n.length;i++){var s=n[i],r=n[i+(i+1<n.length?1:0)];o+=this.Distance(s,r)}var a=0;for(i=0;i<n.length;i++){s=n[i],r=n[i+(i+1<n.length?1:0)];var c=this.Distance(s,r);if(a+=c,a>=o/2){var h=a-o/2,u=h*Math.abs(s.X-r.X)/c,l=h*Math.abs(s.Y-r.Y)/c;u=r.X-s.X>0?-u:u,l=r.Y-s.Y>0?-l:l;var g=new d["a"](r.X+u,r.Y+l);if(Number.NaN!=g.X&&Number.NaN!=g.Y)return g}}return new d["a"](0,0)}},{key:"Fetch",value:function(t){this._id=t.ID,this.startPoint.X=t.StartPoint.X,this.startPoint.Y=t.StartPoint.Y,this.endPoint.X=t.EndPoint.X,this.endPoint.Y=t.EndPoint.Y,this.edittingPoint.X=t.EdittingPoint.X,this.edittingPoint.Y=t.EdittingPoint.Y,t.Title&&(this.title=t.Title),t.SourceCap&&(this.sourceCap=new I,this.sourceCap.Fetch(t.SourceCap)),t.TargetCap&&(this.targetCap=new I,this.targetCap.Fetch(t.TargetCap));for(var e=new v,n=0;n<t.Geometry.Figures.length;n++){var i=t.Geometry.Figures[n],o=new I;o.Fetch(i),e.Figures.push(o)}if(this.Geometry=e,this._selectionAdorner){var s=this._selectionAdorner;s.ResetCache()}}},{key:"Source",get:function(){return this.source},set:function(t){if(this.source!=t){var e=this.source;this.source=t,this.OnSourceChanged(e)}}},{key:"EdittingPoint",get:function(){return this.edittingPoint},set:function(t){this.edittingPoint.X==t.X&&this.edittingPoint.Y==t.Y||(this.edittingPoint.X=t.X,this.edittingPoint.Y=t.Y)}},{key:"Target",get:function(){return this.target},set:function(t){if(this.target!=t){var e=this.target;this.target=t,this.OnTargetChanged(e)}}},{key:"SourceConnectorPosition",get:function(){return this.sourceConnectorPosition},set:function(t){if(this.sourceConnectorPosition!=t){var e=this.sourceConnectorPosition;this.sourceConnectorPosition=t,this.OnSourceConnectorPositionChanged(t,e)}}},{key:"SourceConnectorResult",get:function(){return this.sourceConnectorResult},set:function(t){this.sourceConnectorResult=t}},{key:"Bounds",get:function(){return X.CreateByTwoPoint(this.startPoint,this.endPoint)}},{key:"Position",get:function(){return this.position},set:function(t){this.position=t}},{key:"Geometry",get:function(){return this.geometry},set:function(t){this.geometry!=t&&(this.geometry=t,this._cachedPath=null)}},{key:"Title",get:function(){return this.title},set:function(t){this.title!=t&&(this.title=t)}},{key:"SelectionAdorner",get:function(){return!this._selectionAdorner&&this.Surface&&(this._selectionAdorner=new R(this.Surface.Adorners,this)),this._selectionAdorner}},{key:"TargetConnectorPosition",get:function(){return this.targetConnectorPosition},set:function(t){if(this.targetConnectorPosition!=t){var e=this.targetConnectorPosition;this.targetConnectorPosition=t,this.OnTargetConnectorPositionChanged(t,e)}}},{key:"TargetConnectorResult",get:function(){return this.targetConnectorResult},set:function(t){this.targetConnectorResult=t}},{key:"StartPoint",get:function(){return this.startPoint},set:function(t){}},{key:"EndPoint",get:function(){return this.endPoint},set:function(t){}}]),e}(A["a"]),B=n("8500"),M=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(h["a"])(e).apply(this,arguments)),t._isLoading=!1,t}return Object(l["a"])(e,t),Object(a["a"])(e,[{key:"DetachSourceLink",value:function(){null!=this._sourceLink?this._sourceLink.SourceConnection=null:(this._preSource=null,this._preSourceLink=null)}},{key:"OnRemoveFromSurface",value:function(){null!=this.Source&&null!=this.Target&&null!=this._sourceLink&&(this._sourceLink.Target=null),null!=this.Source?(null!=this._sourceLink&&(this._sourceLink.SourceConnection=null),this._sourceLink=null):(this._preSource=null,this._preSourceLink=null),Object(u["a"])(Object(h["a"])(e.prototype),"OnRemoveFromSurface",this).call(this),this.Invalidate()}},{key:"OnSourceChanged",value:function(t){Object(u["a"])(Object(h["a"])(e.prototype),"OnSourceChanged",this).call(this,t)}},{key:"OnTargetChanged",value:function(t){Object(u["a"])(Object(h["a"])(e.prototype),"OnTargetChanged",this).call(this,t),this._isLoading||console.log("OnTargetChanged todo....")}},{key:"OnSourceConnectorPositionChanged",value:function(t,n){Object(u["a"])(Object(h["a"])(e.prototype),"OnSourceConnectorPositionChanged",this).call(this,t,n),this._isLoading||null!=this._sourceLink&&(this._sourceLink.SourceConnector=t)}},{key:"OnTargetConnectorPositionChanged",value:function(t,n){Object(u["a"])(Object(h["a"])(e.prototype),"OnTargetConnectorPositionChanged",this).call(this,t,n),this._isLoading||null!=this._sourceLink&&(this._sourceLink.TargetConnector=t)}},{key:"getPropertyItems",value:function(){var t=new Array,e=this;return t.push({name:"显示",items:[{title:"标题",editorType:"TextBox",readonly:!0,getter:function(){return e.Title},setter:function(t){}}]}),t.push({name:"位置",items:[{title:"开始点",editorType:"TextBox",readonly:!0,getter:function(){return e.StartPoint.toString()},setter:function(t){}},{title:"结束点",editorType:"TextBox",readonly:!0,getter:function(){return e.EndPoint.toString()},setter:function(t){}}]}),t}},{key:"Behavior",get:function(){return B["a"].None}}]),e}(W),L=n("b7c5"),Z=function t(){Object(r["a"])(this,t)},N=function(){function t(){Object(r["a"])(this,t),this.name=""}return Object(a["a"])(t,[{key:"CalculateRelativePosition",value:function(t){return new d["a"](t.Width*this.Offset.X,t.Height*this.Offset.Y)}},{key:"Name",get:function(){return this.name},set:function(t){this.name=t}},{key:"Offset",get:function(){return this.offset},set:function(t){this.offset=t}},{key:"Shape",get:function(){return this.shape},set:function(t){this.shape=t}},{key:"AbsolutePosition",get:function(){if(!this.Shape)return new d["a"](0,0);var t=this.Shape.Bounds,e=new d["a"](t.X,t.Y),n=new Z;n.Width=t.Width,n.Height=t.Height;var i=this.CalculateRelativePosition(n),o=new d["a"](e.X+i.X,e.Y+i.Y);return o}}]),t}(),_=n("662f"),E=function(t){function e(t,n){var i;return Object(r["a"])(this,e),i=Object(c["a"])(this,Object(h["a"])(e).call(this,t,n)),i._mode=G.None,i._bounds=new g["a"](0,0,n.Bounds.Width,n.Bounds.Height),i}return Object(l["a"])(e,t),Object(a["a"])(e,[{key:"Bounds",get:function(){return this._bounds}}]),Object(a["a"])(e,[{key:"OnRender",value:function(t){Object(u["a"])(Object(h["a"])(e.prototype),"OnRender",this).call(this,t),this._mode!==G.None&&(t.setLineDash([4,4]),t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(this._bounds.X,this._bounds.Y,this._bounds.Width,this._bounds.Height),t.setLineDash([]))}},{key:"Move",value:function(t,e){this._mode!==G.Moving&&(this._mode=G.Moving),this._bounds.X+=t,this._bounds.Y+=e,this.Owner.Invalidate()}},{key:"OnEndMove",value:function(){this._mode===G.Moving&&(this._mode=G.None,this._bounds.X=this._bounds.Y=0,this.Owner.Invalidate())}}]),e}(_["a"]);(function(t){t[t["None"]=0]="None",t[t["Moving"]=1]="Moving",t[t["Resizing"]=2]="Resizing"})(G||(G={}));var H,z=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(h["a"])(e).call(this)),t._bounds=new g["a"](0,0,0,0),t._connectors=new Array,t.EnsureDefaultConnectors(),t}return Object(l["a"])(e,t),Object(a["a"])(e,[{key:"EnsureDefaultConnectors",value:function(){this.EnsureConnector(C.Auto),this.EnsureConnector(C.Left),this.EnsureConnector(C.Top),this.EnsureConnector(C.Right),this.EnsureConnector(C.Bottom)}},{key:"EnsureConnector",value:function(t){for(var e=-1,n=0;n<this._connectors.length;n++)if(this._connectors[n].Name===t){e=n;break}if(-1===e){var i=new N;i.Name=t,i.Offset=C.GetKnownOffset(t),i.Shape=this,this._connectors.push(i)}}},{key:"CanConnect",value:function(t,e){return!0}},{key:"SetBounds",value:function(t,e,n,i,o){var s=new g["a"](this._bounds.X,this._bounds.Y,this._bounds.Width,this._bounds.Height);this._bounds.X=t,this._bounds.Y=e,this._bounds.Width=n,this._bounds.Height=i,this.InvalidateOnBoundsChanged(s)}},{key:"Move",value:function(t,e){var n=this.SelectionAdorner;n.Move(t,e)}},{key:"OnEndMove",value:function(){var t=this.SelectionAdorner,e=this._bounds.X+=t.Bounds.X,n=this._bounds.Y+=t.Bounds.Y;t.OnEndMove(),this.Surface&&this.Surface.DesignService&&this.Surface.DesignService.ChangeProperty(this,"Move",e,n),this._bounds.X=e,this._bounds.Y=n}},{key:"Paint",value:function(t){}},{key:"Position",get:function(){return new d["a"](this._bounds.X,this._bounds.Y)},set:function(t){this.SetBounds(t.X,t.Y,this._bounds.Width,this._bounds.Height,L["a"].All)}},{key:"Bounds",get:function(){return this._bounds},set:function(t){this.SetBounds(t.X,t.Y,t.Width,t.Height,L["a"].All)}},{key:"SelectionAdorner",get:function(){return!this._selectionAdorner&&this.Surface&&(this._selectionAdorner=new E(this.Surface.Adorners,this)),this._selectionAdorner}},{key:"Connectors",get:function(){return this._connectors}}]),e}(A["a"]);(function(t){t[t["StartActivityModel"]=1]="StartActivityModel",t[t["DecisionActivityModel"]=2]="DecisionActivityModel",t[t["AutomationActivityModel"]=3]="AutomationActivityModel",t[t["SingleHumanActivityModel"]=4]="SingleHumanActivityModel",t[t["MultiHumanActivityModel"]=5]="MultiHumanActivityModel"})(H||(H={}));var x=H,V=function(){function t(e){Object(r["a"])(this,t),this._designer=e}return Object(a["a"])(t,[{key:"Paint",value:function(t,e){new g["a"](0,0,this._designer.Bounds.Width,this._designer.Bounds.Height);if(t.beginPath(),t.ellipse(this._designer.Bounds.Width/2,this._designer.Bounds.Height/2,this._designer.Bounds.Width/2,this._designer.Bounds.Height/2,0,0,2*Math.PI,!0),t.closePath(),t.fillStyle="Green",t.fill(),t.beginPath(),t.lineTo(10,5),t.lineTo(25,15),t.lineTo(10,25),t.closePath(),t.fillStyle="White",t.fill(),e){var n=0,i=t.measureText(e);this._designer.Bounds.Width>i.width&&(n=(this._designer.Bounds.Width-i.width)/2),t.fillStyle="black",t.textBaseline="middle",t.fillText(e,n,this._designer.Bounds.Height/2)}}}]),t}(),U=new Image;U.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAzCAYAAACNHMgNAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAABCJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj41MTwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAg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";var F=new Image;F.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAzCAYAAACNHMgNAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAABCJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj41MTwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAg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";var J=function(){function t(e,n){Object(r["a"])(this,t),this._designer=e,this._isSingle=n}return Object(a["a"])(t,[{key:"DrawRoundRect",value:function(t,e,n,i,o,s){i<2*s&&(s=i/2),o<2*s&&(s=o/2),t.strokeStyle="DarkGreen",t.lineWidth=1.5,t.beginPath(),t.moveTo(e+s,n),t.arcTo(e+i,n,e+i,n+o,s),t.arcTo(e+i,n+o,e,n+o,s),t.arcTo(e,n+o,e,n,s),t.arcTo(e,n,e+i,n,s),t.closePath(),t.stroke()}},{key:"Paint",value:function(t,e){if(this._isSingle?t.drawImage(U,2,(this._designer.Bounds.Height-20)/2,12,20):t.drawImage(F,2,(this._designer.Bounds.Height-20)/2,12,20),this.DrawRoundRect(t,0,0,this._designer.Bounds.Width,this._designer.Bounds.Height,8),e){var n=0,i=t.measureText(e);this._designer.Bounds.Width>i.width&&(n=(this._designer.Bounds.Width-i.width)/2),t.fillStyle="black",t.textBaseline="middle",t.fillText(e,n+4,this._designer.Bounds.Height/2)}}}]),t}(),Q=new Image;Q.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAzCAYAAACNHMgNAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAABCJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj41MTwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpzdWJqZWN0PgogICAgICAgICAgICA8cmRmOkJhZy8+CiAgICAgICAgIDwvZGM6c3ViamVjdD4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTc6MDM6MTEgMTQ6MDM6MzY8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPlBpeGVsbWF0b3IgMy42PC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgqyrJqFAAAD+ElEQVRYCe2UXYjWRRSH1/ykQisFM5MWtJTCjNLLbswgwksNgkgK0SCQUEG6LGUjuqgbwcAPsJvAiwIpIVlc8QsrqpswSlA0KPzIsg/TSnue/87v3dnXfTe8M3gPPP85c2bmnDNnZv49PV3pVqBbgZumAreUTO6l3Qe7YHyx2UwEbfthFihjB5v//uo8kx9HvwLX4E0wYC+8Adr+hMWgmMCYRhvl4wQZV+Y8QnsedPYXHIcToGNtZ2ERKM0Os/VB0/Cvjl0kf5ehx2hvL7pBZ0MvWCJlCpiEYgKtzNRrifPpGB+F32AObIQJcBUM/A8o2aFZvwbav4E74TrRuSivgo4McLno9hNAPdQ25150LJHRR5Sfi/W20upMSQK/o2uzbNoy7i6lo8SBE9ZCHHkWyfgQ+tOwFA4Wu6UR5/wB66CjZHdmdxhclDL9iv4ERJagNCWhzY0aQJ802i3Kds26uRG0EQOdS6fol0o/65zTvq61xBKlTGZ3GlzoAlt5F7xl98AWiD1lPIWt3iXdIamdn8Ds4tS3vi2fY5c4z5ycg2uvkzp7fwdZnNYAdZBR7TnIOooLPBvb98FsPLj74HlwTQKkxs1vAbvrLNFO+A4mww3J28xOximD/Vp/h76BRpSxWDOYc7gb25Pg2EPgDy1B3Ent/Ef6C0FpdhVnGnToZBf5CnWorIRPYAVMgmmgfAzPwItFp+mZCnVZmiSTqRPqgPb9S/pizfgjWAAD0A+zIDIH5VM4BvOLsUlQ56KDB2ADfA/vgcFWwWrwNfvD2wxeSx+VwXTcB8dhHtwKX4FViN/Wg1qOMbX9At1s0q/rfBj7gWpsGXq71FVp1dpsvoQ4TZtzqYNk7DPm94IyAcbBMOd1zd3mHlDyH/FOK1lkEMdslb1wEnTsm3C+wVvSHnF2GdFu8DjWnGS0xd7rAKJjDzWBtQ0Tt/cC5JdrNinDLvSX4MPKlvGfsD0HCY7aCq7eyLN8+8HJOvUGxMFe9OmgzIAcrpk6z/nnwHeyFCLZYdP3wSRbt+rC1PKtZsbQx2uaJOog2rYOTRvakXU7Uwbuor2j6AbJGexDvwD3wyvgTnSYsziF/gFsh9PQUdyi23VxSqQ+AH2QF12P/4D9KRhV3EVkB0ocWAL1dlJG7dsgUh90bK0yxOCfUnGxkiDqlq3ua3PHite6oyTyg8z4Ftoz1qlZx3k9/jX2uaDUlRi08NV5svUv6EEqA3BUBXGOB2rrLo7AflBM6uFGG+H+F3uzUH0mbILV4G2S9fALmITtGpgC3riX4XXIOzGBG5bxrPARGWA3DHtA9COd7K3sMzGth2ZNva5eT6UfDGSm9aHqPGVG7Uq3Av+7CvwLiL5M62EvMSQAAAAASUVORK5CYII=";var q,K=function(){function t(e){Object(r["a"])(this,t),this._designer=e}return Object(a["a"])(t,[{key:"DrawRoundRect",value:function(t,e,n,i,o,s){i<2*s&&(s=i/2),o<2*s&&(s=o/2),t.lineWidth=1.5,t.strokeStyle="DarkGreen",t.beginPath(),t.moveTo(e+s,n),t.arcTo(e+i,n,e+i,n+o,s),t.arcTo(e+i,n+o,e,n+o,s),t.arcTo(e,n+o,e,n,s),t.arcTo(e,n,e+i,n,s),t.closePath(),t.stroke()}},{key:"Paint",value:function(t,e){if(this.DrawRoundRect(t,0,0,this._designer.Bounds.Width,this._designer.Bounds.Height,30),t.drawImage(Q,2,(this._designer.Bounds.Height-20)/2,12,20),e){var n=0,i=t.measureText(e);this._designer.Bounds.Width>i.width&&(n=(this._designer.Bounds.Width-i.width)/2),t.fillStyle="black",t.textBaseline="middle",t.fillText(e,n+6,this._designer.Bounds.Height/2)}}}]),t}(),$=function(){function t(e){Object(r["a"])(this,t),this._designer=e}return Object(a["a"])(t,[{key:"DrawDiamond",value:function(t){var e=this._designer.Bounds.Width/2,n=this._designer.Bounds.Height/2;t.lineWidth=1.5,t.strokeStyle="DarkGreen",t.beginPath(),t.moveTo(0,n),t.lineTo(e,0),t.lineTo(this._designer.Bounds.Width,n),t.lineTo(e,this._designer.Bounds.Height),t.lineTo(0,n),t.closePath(),t.stroke()}},{key:"Paint",value:function(t,e){if(this.DrawDiamond(t),e){var n=0,i=t.measureText(e);this._designer.Bounds.Width>i.width&&(n=(this._designer.Bounds.Width-i.width)/2),t.fillStyle="black",t.textBaseline="middle",t.fillText(e,n,this._designer.Bounds.Height/2)}}}]),t}();(function(t){t[t["None"]=0]="None",t[t["X"]=1]="X",t[t["Y"]=2]="Y",t[t["Location"]=3]="Location",t[t["Width"]=4]="Width",t[t["Height"]=8]="Height",t[t["Size"]=12]="Size",t[t["All"]=15]="All"})(q||(q={}));var tt=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(h["a"])(e).call(this)),t._painter=null,t}return Object(l["a"])(e,t),Object(a["a"])(e,[{key:"OnAddToSurface",value:function(){Object(u["a"])(Object(h["a"])(e.prototype),"OnAddToSurface",this).call(this),Object(u["a"])(Object(h["a"])(e.prototype),"Invalidate",this).call(this)}},{key:"OnRemoveFromSurface",value:function(){console.log("ActivityDesigner OnRemoveFromSurface todo!!!!"),Object(u["a"])(Object(h["a"])(e.prototype),"OnRemoveFromSurface",this).call(this)}},{key:"Invalidate",value:function(){if(null!=this.Surface){var t=new g["a"](this.Bounds.X-1,this.Bounds.Y-1,this.Bounds.Width+2,this.Bounds.Height+2);this.Surface.Invalidate(t)}}},{key:"CanConnect",value:function(t,e){return console.log("ActivityDesigner CanConnect todo.....\n"),!0}},{key:"Paint",value:function(t){null!=this._painter?this._painter.Paint(t,this._title):(t.lineWidth=2,t.strokeStyle="green",t.strokeRect(0,0,this.Bounds.Width,this.Bounds.Height))}},{key:"Fetch",value:function(t){switch(this._title=t.Title,this._id=t.ID,this._bounds.X=t.Bounds.X,this._bounds.Y=t.Bounds.Y,this._bounds.Width=t.Bounds.Width,this._bounds.Height=t.Bounds.Height,t.Bounds instanceof g["a"]&&console.log("data.Bounds is Rectangle"),t.ItemType){case x.StartActivityModel:this._painter=new V(this);break;case x.SingleHumanActivityModel:this._painter=new J(this,!0);break;case x.MultiHumanActivityModel:this._painter=new J(this,!1);break;case x.AutomationActivityModel:this._painter=new K(this);break;case x.DecisionActivityModel:this._painter=new $(this);break}}},{key:"Behavior",get:function(){return B["a"].CanMove}}]),e}(z),et=function(){function t(e){Object(r["a"])(this,t),this._service=e}return Object(a["a"])(t,[{key:"getPropertyOwnerType",value:function(){return"工作流模型"}},{key:"getPropertyItems",value:function(){var t=this,e=new Array;return e.push({name:"属性",items:[{title:"标识",editorType:"TextBox",readonly:!0,getter:function(){return t._service.ModelID},setter:function(t){}},{title:"参数",editorType:"TextBox",readonly:!1,getter:function(){return"参数列表"},setter:function(t){}}]}),e}}]),t}(),nt=function(){function t(e,n,i){Object(r["a"])(this,t),this._surface=e,this._channel=n,this._modelId=i,this._surface.DesignService=this,this._rootDesigner=new et(this)}return Object(a["a"])(t,[{key:"ModelID",get:function(){return this._modelId}},{key:"RootDesigner",get:function(){return this._rootDesigner}}]),Object(a["a"])(t,[{key:"ChangeProperty",value:function(t,e,n,i){var o=this;this._channel.invoke("sys.DesignService.ChangeWorkflowItemProperty",[this._modelId,t.ID,e,n,i]).then(function(t){if(t)for(var e=t,n=0;n<e.length;n++){var i=e[n],s=o.FindByID(i.ID);s&&s.Fetch(i),o._surface.Invalidate()}}).catch(function(t){console.log("ChangeProperty Error:",t)})}},{key:"FindByID",value:function(t){for(var e=0;e<this._surface.Items.length;e++){var n=this._surface.Items[e];if(n.ID===t)return n}return null}},{key:"LoadDesignersFromServer",value:function(t){for(var e=0;e<t.Designers.length;e++){var n=t.Designers[e],i=new tt;i.Fetch(n),this._surface.AddItem(i)}for(e=0;e<t.Connections.length;e++){n=t.Connections[e];var o=new M;o.Fetch(n),this._surface.AddItem(o)}this._surface.PropertyPanel.setPropertyOwner(this._rootDesigner),this._surface.Invalidate()}},{key:"GetShapes",value:function(){for(var t=new Array,e=0;e<this._surface.Items.length;e++){var n=this._surface.Items[e];n instanceof tt&&t.push(n)}return t}},{key:"GetConnections",value:function(){for(var t=new Array,e=0;e<this._surface.Items.length;e++){var n=this._surface.Items[e];n instanceof M&&t.push(n)}return t}}]),t}(),it={components:{DesignView:s["a"]},props:{target:{type:Object,required:!0}},data:function(){return{}},methods:{save:function(){console.warn("尚未实现")}},mounted:function(){var t=this,e=this;this.$nextTick(function(){var n=new nt(t.$refs.designView.designSurface,$runtime.channel,t.target.ID);$runtime.channel.invoke("sys.DesignService.OpenWorkflowModel",[t.target.ID]).then(function(t){n.LoadDesignersFromServer(t)}).catch(function(t){e.$message.error(t.toString())})})}},ot=it,st=n("2877"),rt=Object(st["a"])(ot,i,o,!1,null,null,null);e["default"]=rt.exports},"8b97":function(t,e,n){var i=n("d3f4"),o=n("cb7c"),s=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:s}},9093:function(t,e,n){var i=n("ce10"),o=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},aa77:function(t,e,n){var i=n("5ca1"),o=n("be13"),s=n("79e5"),r=n("fdef"),a="["+r+"]",c="​",h=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),l=function(t,e,n){var o={},a=s(function(){return!!r[t]()||c[t]()!=c}),h=o[t]=a?e(g):r[t];n&&(o[n]=h),i(i.P+i.F*a,"String",o)},g=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(h,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},c5f6:function(t,e,n){"use strict";var i=n("7726"),o=n("69a8"),s=n("2d95"),r=n("5dbc"),a=n("6a99"),c=n("79e5"),h=n("9093").f,u=n("11e9").f,l=n("86cc").f,g=n("aa77").trim,d="Number",A=i[d],C=A,f=A.prototype,v=s(n("2aeb")(f))==d,b="trim"in String.prototype,y=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():g(e,3);var n,i,o,s=e.charCodeAt(0);if(43===s||45===s){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var r,c=e.slice(2),h=0,u=c.length;h<u;h++)if(r=c.charCodeAt(h),r<48||r>o)return NaN;return parseInt(c,i)}}return+e};if(!A(" 0o1")||!A("0b1")||A("+0x1")){A=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof A&&(v?c(function(){f.valueOf.call(n)}):s(n)!=d)?r(new C(y(e)),n,A):y(e)};for(var I,P=n("9e1e")?h(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),p=0;P.length>p;p++)o(C,I=P[p])&&!o(A,I)&&l(A,I,u(C,I));A.prototype=f,f.constructor=A,n("2aba")(i,d,A)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);